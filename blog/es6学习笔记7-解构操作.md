---
title: es6学习笔记(7)-解构操作
date: 2017-05-07 20:23:36
tags:
    - JavaScript
    - ES2015
---

在ES6中 允许我们按照一定模式，从数组和对象中提取值，然后赋值到对应的变量中，这种操作称为解构。一个简单的例子：

在出现结构之前，如果我们想交换两个变量的值,需要这样:

let a = 1;
let b = 2;
let tmp = a;
a = b;
b = tmp;
而有了解构操作之后:

let [a, b] = [1, 2];    \/\/ 给多个变量同时赋值
[a, b] = [b, a];        \/\/ 交换 a, b 的值
从上面的例子中可以简单的看出，如果等会左边的模式与等号右边的模式是相同的，就可以进行变量的解构（将模式中右边的值赋值给左边对应的变量）。

数组的解构

上面这个例子就可以看做是对数组的解构。另外只要模式是相同的，甚至可以解构任意复杂的形式，这就是它的方便之处。下面介绍数组解构的其他情况:

嵌套数组:
let [a, b, [c, [d]]] = [1, 2, [3, [4]]];
a   /\/1
b   /\/2
c   /\/3
d   /\/4
解构部分值
如果只需要数组的部分值，则只需省略对应位置的变量，并保留分号即可，如下:

let [,a,] = [1, 2, 3]
a  /\/ 2
一个变量匹配多个元素
可以将数组的部分元素匹配到一个变量中，此时这个变量也是数组

let [a, b , ...c] = [1, 2, 3, 4]
a  // 1
b  // 2
c  // [3, 4]
不完全匹配
如果右边对应的匹配项多余左边，类似的这种情况被称为不完全匹配,也是可以进行解构的

let [a, b] = [1, 2, 3]
a  // 1
b  // 2
除此之外，如果解构失败，即像下面这种情况时，左边变量的值将不会被改变，例如:

let [a, b] = [1]
此时 解构就会失败, a 和 b 的值都会保持不变。

对象的解构

对象同样可以进行解构，不过使用的是键来进行匹配,即属性名来匹配，例如

let {name, age} = {name: "es6", age: 5}
name // "es6"
age  // 5
不过，其实上面这种写法只是一种简写方式，完整的语法是下面这样:

let {key1: name1, key2: name2, ...} = {key1: value1, key2: value2, ...}
来解释一下，等号右边就是一个正常的对象，等号的左边key1,key2是用来与右边的键进行模式匹配的，而 name1, name2是我们匹配成功后赋值的变量名。意思就是说 key1,key2仅仅是用来匹配的，并不是实际的变量名，真正的变量名就是冒号后面对应的名字，例如上面的例子其实就是这种方式的简写:

let {name: name, age: age} = {name: "es6", age: 5}
name // "es6"
age  // 5
所以，当匹配的键名与变量名相同时就可以使用简写的方式，如果不相同，就不能简写。

对象的其他属性或者方法也可以被匹配，只需要使用对应的名字就可以:

let obj = {name: "es6", age: 5};
let {toString: s} = obj;
s === obj.toString   // true
因此像数字类型和布尔类型也可以进行解构，他们会转换为对应的对象类型

字符串解构

字符串也可以被解构，例如:

let [a, b, c] = 'hello';
a // 'h'
b // 'e'
c // 'l'
也可以像对象一样匹配字符串的 length 属性:

let {length: len} = 'hello';
len // 5
参数解构

函数的参数也可以使用解构来赋值。

首先我们定义一个函数

function add([a, b]) {
    return a + b
}
add([1, 2])   // 3
从上面的简单的例子可以看到，其实它与直接解构的方式是相同的。