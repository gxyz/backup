author: me
title: es6学习笔记(2)-let和const
date: 2017-04-29 10:10:08
tags:
    - JavaScript
    - ES2015
---

es6 中新添加一个声明变量的let关键字和一个声明常量的 const 关键字。用来替代之前的 var 关键字，它们的优势很多，下面来一一细说。

## var

在 es6 之前，JavaScript中声明变量使用的就是 var 关键字，这个关键字声明的变量有很多奇怪的地方，比如以下几点:

1. 变量声明提升
2. 不支持块作用域
3. 可以重复的声明已经存在的变量

之前学过 JavaScript 的，都应该知道，JavaScript 存在变量声明提升的概念，就是变量的声明会被提升到当前作用域的最前面，这其实是由于 JavaScript 中的编译机制造成的，这里就不细说了，可以看看这里的文章[http://www.jianshu.com/p/cd3fee40ef59](http://www.jianshu.com/p/cd3fee40ef59)

一个简单的提醒变量声明提升例子:

```javascript
function run() {
    console.log(a)   // 会输出 undefined
    var a = 20
    console.log(a)   // 会输出 20
}

run()
```

可以看到在函数 run 中首先打印了 变量 a, 然后才重新定义了 a, 但是 程序并没有抛出 `a is not defined` 的错误。而是打印出了 `undefined`。这就是由于变量声明的提升，它就相当于:

```javascript
function run() {
    var a;
    console.log(a)   // 会输出 undefined
    a = 20
    console.log(a)   // 会输出 20
}

run()
```

而对于块作用域, 其实 es6 之前根本就不支持块作用域，JavaScript中只有函数作用域和全局作用域，因此，在循环中，判断等结构中声明的变量，都会变成全局变量。而在其他语言中，`{ }` 内部的区域其实是会被当今块作用域来处理的，即在里面定义的变量，在外部是不能访问的。这可以用来减少全局空间的污染。

由于没有块作用域，因此在之前的 JavaScript 中，经常会见到这样的代码来模拟块作用域:

```javascript
function() {
    var a = 10
    var b = 20
    console.log(a + b)
}()
```

就是使用立即执行匿名函数的函数作用域来定义变量，在匿名函数执行完毕之后，内部的变量就会像块作用域一样被释放。

另外还有一点就是使用 var 可以重复声明同名的变量，因此有时候会造成难以调试的错误。

## let

let 关键字可以是就是用来取代 var 关键字的，解决了 var 关键字声明的变量的变量提升的问题和没有块作用域的问题，并且在同一级作用域下，let声明的变量名不能被声明多次，否则会直接抛出错误。

因此上面 var 出现的问题，使用 let 后就不会在出现了，其它方面来说使用方式是一样的。

let 的出现，使得 JavaScript 的语法结构开始向其他语言靠拢，这些基本的功能其实在其他语言中大部分都被实现了。所有更加容易理解

总结一下, let 和 var 声明变量的区别如下:

||let|var|
|---|---|---|
|变量提升|不会|会|
|块作用域|支持|不支持|
|重复定义检查|支持|不支持|

## const 

const 在 ES6 中是用来定义常量的，例如:

```javascript
const a = 'hello'
```

定义之后，这个常量 a 的值就不能被改变了。对与其他的值类型也是如此

但是，如果定义的常量的值，是数组、对象这种引用类型，其实是可以被更改的，例如:

```javascript
const arr = [1, 2, 3]

arr[1] = [4];
```

此时， arr 的值就会变成 [1,4,3]

这种现象看起来 arr 的值被改变了，不过其实 arr 指向的还是同一个数组，但是由于数组中不同元素存储的地址不同，因此其中各个元素的值可以被改变。但是如果给 arr 重新设置为另外一个值不可以了。

另外 const 与 let 的特性很相似，不存在常量声明提升，支持块作用域等等

